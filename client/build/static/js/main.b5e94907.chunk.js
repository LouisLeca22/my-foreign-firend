(window.webpackJsonpproject_chat_application=window.webpackJsonpproject_chat_application||[]).push([[0],{15:function(e,a,t){e.exports=t.p+"static/media/fr.78ff58c9.svg"},16:function(e,a,t){e.exports=t.p+"static/media/es.0529d1da.svg"},17:function(e,a,t){e.exports=t.p+"static/media/it.32955f22.svg"},18:function(e,a,t){e.exports=t.p+"static/media/de.ab036035.svg"},19:function(e,a,t){e.exports=t.p+"static/media/br.822f9004.svg"},20:function(e,a,t){e.exports=t.p+"static/media/jp.71a39aee.svg"},44:function(e,a,t){e.exports=t.p+"static/media/language.9c1594f5.svg"},45:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII="},50:function(e,a,t){e.exports=t(88)},55:function(e,a,t){},56:function(e,a,t){},57:function(e,a,t){},58:function(e,a,t){},82:function(e,a){},85:function(e,a,t){},86:function(e,a,t){},87:function(e,a,t){},88:function(e,a,t){"use strict";t.r(a);var n=t(1),c=t.n(n),r=t(43),s=t.n(r),l=(t(55),t(5)),m=t(49),i=t(4),o={name:"",room:"Fran\xe7ais",messages:[],message:"",users:[],error:""},u=function(e,a){switch(a.type){case"SET_NAME":return Object(i.a)(Object(i.a)({},e),{},{name:a.name});case"SET_ROOM":return Object(i.a)(Object(i.a)({},e),{},{room:a.room});case"SET_USERS":return Object(i.a)(Object(i.a)({},e),{},{users:a.users});case"SET_MESSAGES":return Object(i.a)(Object(i.a)({},e),{},{messages:[].concat(Object(m.a)(e.messages),[a.message])});case"SET_MESSAGE":return Object(i.a)(Object(i.a)({},e),{},{message:a.message});case"SET_ERROR":return Object(i.a)(Object(i.a)({},e),{},{error:a.error});default:return e}},E=Object(n.createContext)({state:o,dispatch:function(){}}),f=function(e){var a=e.children,t=Object(n.useReducer)(u,o),r=Object(l.a)(t,2),s=r[0],m=r[1];return c.a.createElement(E.Provider,{value:{state:s,dispatch:m}},a)},d=(t(56),t(46)),g=t(15),p=t.n(g),v=t(16),b=t.n(v),O=t(17),A=t.n(O),_=t(18),S=t.n(_),N=t(19),j=t.n(N),h=t(20),x=t.n(h),C=t(44),R=t.n(C);function M(e){var a;switch(e.type){case"Fran\xe7ais":a=p.a;break;case"Espagnol":a=b.a;break;case"Portugais":a=j.a;break;case"Italien":a=A.a;break;case"Allemand":a=S.a;break;case"Japonais":a=x.a;break;default:a=R.a}return c.a.createElement("img",{src:a,alt:"flag"})}var y,k=t(45),T=t.n(k),w=function(e){return{type:"SET_NAME",name:e}},I=function(e){return{type:"SET_ROOM",room:e}},G=function(e){return{type:"SET_MESSAGE",message:e}},J=function(e){return{type:"SET_ERROR",error:e}},U=function(){var e=Object(n.useContext)(E),a=e.state,t=e.dispatch,r=a.room,s=a.users,l=a.name;return c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar__header"},c.a.createElement("span",{className:"logo"},"MyForeignFriend"),c.a.createElement("div",{className:"user"},c.a.createElement("span",null,l),c.a.createElement("button",{onClick:function(){return t(w(""))}},c.a.createElement(d.a,null)))),c.a.createElement("div",{className:"sidebar__main"},c.a.createElement("div",{className:"sidebar__main-room"},c.a.createElement("div",{className:"icon"},c.a.createElement(M,{type:r})),c.a.createElement("span",null,"Vous \xeates dans le salon ",c.a.createElement("em",null," ",r))),c.a.createElement("div",{className:"sidebar__main-users"},s.map((function(e){return c.a.createElement("div",{className:"user",key:e.name},c.a.createElement("img",{src:T.a,alt:"online"}),e.name)})))))},F=(t(57),t(21)),z=t(29),B=t.n(z),D=function(e){var a=e.message,t=a.text,n=a.user,r=a.time,s=!1,l=e.name.trim().toLowerCase();return n===l&&(s=!0),s?c.a.createElement("div",{className:"message isMine"},c.a.createElement("p",{className:"message__author"},l),c.a.createElement("div",{className:"message__box"},c.a.createElement("p",{className:"message__box--text"},B.a.emojify(t)),c.a.createElement("div",{className:"message__box--time"},r))):c.a.createElement("div",{className:"message"},c.a.createElement("p",{className:"message__author"},n),c.a.createElement("div",{className:"message__box"},c.a.createElement("p",{className:"message__box--author"},B.a.emojify(t)),c.a.createElement("div",{className:"message__box--time"},r)))},P=(t(58),function(){var e=Object(n.useContext)(E).state,a=e.messages,t=e.name,r=Object(n.useRef)();return Object(n.useEffect)((function(){r.current.scroll(0,r.current.scrollHeight)}),[a]),c.a.createElement("div",{ref:r,className:"messages"},a.map((function(e){return c.a.createElement("div",{key:e.id},c.a.createElement(D,{message:e,name:t}))})))}),Q={JOIN_ROOM:"JOIN_ROOM",CHAT_MESSAGE:"CHAT_MESSAGE"},Y={MESSAGE:"MESSAGE",ROOM_USERS:"ROOM_USERS"},H=t(2),K=t(47),L=t.n(K),V=t(48),q=(t(85),function(){var e=Object(n.useContext)(E),a=e.state,t=e.dispatch,r=a.message,s=function(){var e=Object(n.useContext)(E),a=e.state,t=e.dispatch,c=a.name,r=a.room,s=Object(H.f)();return Object(n.useEffect)((function(){(y=L()()).emit(Q.JOIN_ROOM,{name:c,room:r},(function(e){e&&(t(J(e)),s("/"))}))}),[t,s,r,c]),Object(n.useEffect)((function(){y.on(Y.MESSAGE,(function(e){t(function(e){return{type:"SET_MESSAGES",message:e}}(e))})),y.on(Y.ROOM_USERS,(function(e){var a=e.users;t(function(e){return{type:"SET_USERS",users:e}}(a))}))}),[t]),y}();return c.a.createElement("div",{className:"form",onSubmit:function(e){e.preventDefault(),r&&s.emit(Q.CHAT_MESSAGE,r,(function(){return t(G(""))}))}},c.a.createElement("form",null,c.a.createElement("input",{value:r,type:"text",placeholder:"Tapez votre message ici...",required:!0,autoComplete:"off",onChange:function(e){return t(G(e.target.value))}}),c.a.createElement("button",{type:"submit",className:"btn"},c.a.createElement(V.a,{size:32,style:{color:"white"}}))))}),Z=function(){var e=Object(n.useContext)(E).state.room;return c.a.createElement("div",{className:"chat"},c.a.createElement("div",{className:"chat__header"},c.a.createElement("span",null,"Salon"),c.a.createElement("div",null," ",c.a.createElement(F.a,{size:32})," ",c.a.createElement("span",null,e))),c.a.createElement(P,null),c.a.createElement(q,null))},W=function(){var e=Object(n.useContext)(E).state.name,a=Object(H.f)();return Object(n.useEffect)((function(){""===e&&a("/")}),[a,e]),c.a.createElement("div",{className:"home"},c.a.createElement(U,null),c.a.createElement(Z,null))};t(86);function X(){var e=Object(n.useContext)(E),a=e.state,t=e.dispatch,r=a.error,s=a.room,l=a.name,m=Object(H.f)();return Object(n.useEffect)((function(){r&&setTimeout((function(){t(J(""))}),3e3)}),[t,r]),c.a.createElement("div",{className:"join"},c.a.createElement("header",{className:"join__header"},c.a.createElement("div",{className:"icon"},c.a.createElement(F.a,{size:"42"})),c.a.createElement("h1",null,"MyForeignFriend")),c.a.createElement("main",{className:"join__main"},r&&c.a.createElement("div",{className:"error"},r),c.a.createElement("form",null,c.a.createElement("div",{className:"form-control"},c.a.createElement("input",{type:"text",name:"username",id:"username",placeholder:"Nom d'utilisateur...",required:!0,value:l,onChange:function(e){return t(w(e.target.value))}})),c.a.createElement("div",{className:"languages"},c.a.createElement("div",{className:"Fran\xe7ais"===s?"flag active":"flag",onClick:function(){return t(I("Fran\xe7ais"))}},c.a.createElement("img",{src:p.a,alt:"fr"})),c.a.createElement("div",{className:"Espagnol"===s?"flag active":"flag",onClick:function(){return t(I("Espagnol"))}},c.a.createElement("img",{src:b.a,alt:"es"})),c.a.createElement("div",{className:"Italien"===s?"flag active":"flag",onClick:function(){return t(I("Italien"))}},c.a.createElement("img",{src:A.a,alt:"it"})),c.a.createElement("div",{className:"Allemand"===s?"flag active":"flag",onClick:function(){return t(I("Allemand"))}},c.a.createElement("img",{src:S.a,alt:"De"})),c.a.createElement("div",{className:"Portugais"===s?"flag active":"flag",onClick:function(){return t(I("Portugais"))}},c.a.createElement("img",{src:j.a,alt:"Br"})),c.a.createElement("div",{className:"Japonais"===s?"flag active":"flag",onClick:function(){return t(I("Japonais"))}},c.a.createElement("img",{src:x.a,alt:"jp"}))),c.a.createElement("button",{onClick:function(){return m("/chat")},className:"btn"},"Rejoindre le chat"))))}var $=t(9),ee=(t(87),function(){return c.a.createElement(f,null,c.a.createElement($.a,null,c.a.createElement(H.c,null,c.a.createElement(H.a,{path:"/",element:c.a.createElement(X,null)}),c.a.createElement(H.a,{path:"/chat",element:c.a.createElement(W,null)}),c.a.createElement(H.a,{path:"*",element:c.a.createElement(X,null)}))))});s.a.render(c.a.createElement(ee,null),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.b5e94907.chunk.js.map